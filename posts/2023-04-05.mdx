---
title: '@t_wadaの「50分でわかるテスト駆動開発」を視聴してTDDをわかった気になる'
description: '@t_wada さんの TDD 解説動画を視聴すると TDD の概要がわかる！'
coverImage: '/assets/blog/2023-04-05/tumb.png'
date: '2023-04-05T00:00:00.000Z'
ogImage:
  url: '/assets/blog/2023-04-05/tumb.png'
summary:
  - '@t_wada さんの TDD 解説動画を視聴すると TDD の概要がわかる！'
  - '前半に TDD の概念、後半はライブコーディングで具体的な技術を説明'
  - '本記事ではTDD の概念について、重要な部分をピックアップして解説します'
---

### 動画リンク

公式のアーカイブが見つからず、こちらのブログ記事から視聴させていただきました。
[https://proglearn.com/2019/10/08/テスト駆動開発を理解できちゃう素敵な動画-ラ/](https://proglearn.com/2019/10/08/%e3%83%86%e3%82%b9%e3%83%88%e9%a7%86%e5%8b%95%e9%96%8b%e7%99%ba%e3%82%92%e7%90%86%e8%a7%a3%e3%81%a7%e3%81%8d%e3%81%a1%e3%82%83%e3%81%86%e7%b4%a0%e6%95%b5%e3%81%aa%e5%8b%95%e7%94%bb-%e3%83%a9/)

↓ スライド資料

<iframe
  src='//www.slideshare.net/slideshow/embed_code/key/1s1WGcT6DVyV29'
  width='595'
  height='485'
  frameBorder='0'
  marginWidth='0'
  marginHeight='0'
  scrolling='no'
  allowFullScreen
/>

### t_wada とは？

t_wada こと和田卓人さんはテスト駆動開発を日本国内に広めた第一人者で、<br />
「テスト駆動開発」「SQL アンチパターン」など有名本を翻訳出版したすごい人です。

<PointBlock title='用語解説「リファクタリング」'>
  外部からの振る舞いを変えないまま、コードを動作する且つきれいに書き直すこと
</PointBlock>

## テスト駆動開発（TDD）とは

テスト駆動開発（TDD）とは、コードをより動作しやすく、美しく保つための技術です。  
プログラミングにリファクタリングを組み込むことで、開発段階からバグを見つけ、修正することが簡単になります。  
これにより、開発者はシステムをより深く理解し、心理的安全性を持って実装することができます。

> 「動作するきれいなコード」この簡潔な言葉が、テスト駆動開発（TDD）のゴールだ。動作するきれいなコードはあらゆる意味で価値がある。
>
> Kent Beck

## TDD を導入しない場合どうなるか

TDD の意義を理解するために、TDD を導入しなかった場合を考えてみます。  
まず、開発がスタートしたら、すべて **「動かない、汚いコード」** から始まります。  
そこから、**「動作する、きれいなコード」** へ向かうにあたり、２つのルートが存在します。

### １つ目のルート<br />動かない・汚いコード → きれいなコード → 動作する・きれいなコード

きちんと設計を行い、そのままコードに落とし込めば動くようになる考えです。  
一昔前の伝統的な開発ではこちらが主流でした。

しかし、次の問題が発生します。

- コーディングしたら動かなかった
- 後から仕様が変われば、また１から設計し直す必要がある
- 綿密な設計を行ったが、そこまで考慮しなくてよかった

![説明画像1](/assets/blog/2023-04-05/image1.png)

### 2 つ目のルート<br />動かない・汚いコード → 動作するコード → 動作する・きれいなコード

初めからきれいなコードにしようとすると、設計の手間がかかることがわかりました。  
では、ひとまず動くコードを実装してからリファクタリングするという考えはどうでしょうか。

しかしこちらも、次の問題があります。

- 技術負債が生じやすくなる
- 「スケジュールが間に合わないから、汚さを受け入れないといけない」焦り
- 「リファクタリング後、動かなくなったらどうしよう」という恐れ

![説明画像2](/assets/blog/2023-04-05/image2.png)

#### TDD は開発者の恐れを克服する技法

上記の通り、ガチガチに設計しても、後からリファクタリングしても問題が生じることがあります。  
そこで、TDD はテストとリファクタリングのサイクルを回すことで、リファクタリングに対する不安を克服できます。

## TDD はテストとリファクタリングのサイクルを回す

TDD のサイクルは次の通りです。

1. テストを実行して失敗させる（Red）
2. とにかくテストが通るコードを書き、テストを成功させる（Green）
3. テストの中身は変更せず、リファクタリングを行う（Refactor）
4. 次の TODO で 2.~4.を繰り返す

![説明画像3](/assets/blog/2023-04-05/image3.png)

#### 1. テストを実行して失敗させる（Red）

やるべきことを TODO 化し、設計から１つの TODO をピックアップしてテストコードを書きます。  
一番優先度が高いものでも一番簡単なものでも構いません。

次に、テストを書き、実行します。
当然、まだ開発していないため、テストは失敗します。

#### 2. とにかくテストが通るコードを書き、テストを成功させる（Green）

テストが通るための必要最小限のコードを書きます。  
美しさ・正しさは意識しなくてよいです。

→ テストが通るようになる＝「動作するコード」になる

#### 3. テストの中身は変更せず、リファクタリングを行う（Refactor）

テストが落ちないまま、コードをきれいにします。

→ 「動作する、きれいなコード」となる

#### 4. 次の TODO で 1.~3.を繰り返す

再び TODO から１つピックアップしテスト失敗・テスト成功・リファクタリングのサイクルを繰り返します。

## リファクタリングが後回しにされるとどうなるか

TDD サイクルではリファクタリングが一番の肝です。
リファクタリングが後回しにすると次の問題が発生します。

- リファクタリングという名前のチケットが切られ、呪いとなる
- ビジネスオーナーから見たら、エンジニアの自己満足と思われる
- １つ汚いコードがあると、どんどん汚さが積み重なる

これらの問題を回避するには  
**プログラミングの中にリファクタリングを組み込む** ことが重要です。

要はリファクタリングを別タスクにしちゃダメってことですね。

## まとめ

筆者は動画を見る前は「TDD はテストから書くんだなー」くらいの認識しかありませんでした。  
しかし、@t_wada さんの「50 分でわかるテスト駆動開発」を視聴後、TDD の解像度が上がり、ぜひ開発に取り入れたい！と思うくらいには TDD の素晴らしさを実感できました。
ぜひ、お時間ある時視聴してみてください！
